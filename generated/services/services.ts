/**
 * Copyright (c) Spectro Cloud
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated by orval v7.10.0 ðŸº
 * Do not edit manually.
 * Palette APIs - 4.6
 * OpenAPI spec version: v1
 */
import type {
  ServiceManifest,
  ServiceManifestGetParams,
  ServiceVersion,
  ServiceVersionGetParams,
} from ".././schemas";

/**
 * @summary Returns a latest version for a given service name
 */
export type ServiceVersionGetResponse200 = {
  data: ServiceVersion;
  status: 200;
};

export type ServiceVersionGetResponseComposite =
  ServiceVersionGetResponse200;

export type ServiceVersionGetResponse =
  ServiceVersionGetResponseComposite & {
    headers: Headers;
  };

export const getV1ServiceVersionGetUrl = (
  serviceName:
    | "ally"
    | "jet"
    | "palette"
    | "ambit"
    | "ally-lite"
    | "palette-lite"
    | "crony"
    | "tick"
    | "edge"
    | "lodge"
    | "level"
    | "edgeconfig"
    | "firth"
    | "stylus",
  params?: ServiceVersionGetParams,
) => {
  const normalizedParams = new URLSearchParams();

  Object.entries(params || {}).forEach(([key, value]) => {
    if (value !== undefined) {
      normalizedParams.append(key, value === null ? "null" : value.toString());
    }
  });

  const stringifiedParams = normalizedParams.toString();

  return stringifiedParams.length > 0
    ? `https://api.spectrocloud.com/v1/services/${serviceName}/version?${stringifiedParams}`
    : `https://api.spectrocloud.com/v1/services/${serviceName}/version`;
};

export const ServiceVersionGet = async (
  serviceName:
    | "ally"
    | "jet"
    | "palette"
    | "ambit"
    | "ally-lite"
    | "palette-lite"
    | "crony"
    | "tick"
    | "edge"
    | "lodge"
    | "level"
    | "edgeconfig"
    | "firth"
    | "stylus",
  params?: ServiceVersionGetParams,
  options?: RequestInit,
): Promise<ServiceVersionGetResponse> => {
  const res = await fetch(getV1ServiceVersionGetUrl(serviceName, params), {
    ...options,
    method: "GET",
  });

  const body = [204, 205, 304].includes(res.status) ? null : await res.text();
  const data: ServiceVersionGetResponse["data"] = body
    ? JSON.parse(body)
    : {};

  return {
    data,
    status: res.status,
    headers: res.headers,
  } as ServiceVersionGetResponse;
};

/**
 * @summary Returns a service manifest for a given service name and version
 */
export type ServiceManifestGetResponse200 = {
  data: ServiceManifest;
  status: 200;
};

export type ServiceManifestGetResponseComposite =
  ServiceManifestGetResponse200;

export type ServiceManifestGetResponse =
  ServiceManifestGetResponseComposite & {
    headers: Headers;
  };

export const getV1ServiceManifestGetUrl = (
  serviceName:
    | "ally"
    | "jet"
    | "palette"
    | "ambit"
    | "ally-lite"
    | "palette-lite"
    | "crony"
    | "tick"
    | "edge"
    | "lodge"
    | "level"
    | "edgeconfig"
    | "firth"
    | "stylus",
  version: string,
  params: ServiceManifestGetParams,
) => {
  const normalizedParams = new URLSearchParams();

  Object.entries(params || {}).forEach(([key, value]) => {
    if (value !== undefined) {
      normalizedParams.append(key, value === null ? "null" : value.toString());
    }
  });

  const stringifiedParams = normalizedParams.toString();

  return stringifiedParams.length > 0
    ? `https://api.spectrocloud.com/v1/services/${serviceName}/versions/${version}/manifest?${stringifiedParams}`
    : `https://api.spectrocloud.com/v1/services/${serviceName}/versions/${version}/manifest`;
};

export const ServiceManifestGet = async (
  serviceName:
    | "ally"
    | "jet"
    | "palette"
    | "ambit"
    | "ally-lite"
    | "palette-lite"
    | "crony"
    | "tick"
    | "edge"
    | "lodge"
    | "level"
    | "edgeconfig"
    | "firth"
    | "stylus",
  version: string,
  params: ServiceManifestGetParams,
  options?: RequestInit,
): Promise<ServiceManifestGetResponse> => {
  const res = await fetch(
    getV1ServiceManifestGetUrl(serviceName, version, params),
    {
      ...options,
      method: "GET",
    },
  );

  const body = [204, 205, 304].includes(res.status) ? null : await res.text();
  const data: ServiceManifestGetResponse["data"] = body
    ? JSON.parse(body)
    : {};

  return {
    data,
    status: res.status,
    headers: res.headers,
  } as ServiceManifestGetResponse;
};
