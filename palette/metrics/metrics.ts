/**
 * Copyright (c) Spectro Cloud
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated by orval v7.10.0 🍺
 * Do not edit manually.
 * Palette APIs - 4.6
 * OpenAPI spec version: v1
 */
import type {
  MetricTimeSeries,
  MetricTimeSeriesList,
  MetricsListParams,
  MetricsUidListParams,
} from ".././schemas";

import { customInstance } from ".././httpClient/customClient";

/**
 * Returns all the metrics for a given resource kind
 * @summary Retrieves the list of metrics for a specified resource kind
 */
export type metricsListResponse200 = {
  data: MetricTimeSeriesList;
  status: 200;
};

export type metricsListResponseComposite = metricsListResponse200;

export type metricsListResponse = metricsListResponseComposite & {
  headers: Headers;
};

export const getMetricsListUrl = (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  params?: MetricsListParams,
) => {
  const normalizedParams = new URLSearchParams();

  Object.entries(params || {}).forEach(([key, value]) => {
    if (value !== undefined) {
      normalizedParams.append(key, value === null ? "null" : value.toString());
    }
  });

  const stringifiedParams = normalizedParams.toString();

  return stringifiedParams.length > 0
    ? `https://api.spectrocloud.com/v1/metrics/${resourceKind}/values?${stringifiedParams}`
    : `https://api.spectrocloud.com/v1/metrics/${resourceKind}/values`;
};

export const metricsList = async (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  params?: MetricsListParams,
  options?: RequestInit,
): Promise<metricsListResponse> => {
  return customInstance<metricsListResponse>(
    getMetricsListUrl(resourceKind, params),
    {
      ...options,
      method: "GET",
    },
  );
};

/**
 * @summary Deletes the metrics of the specified resource
 */
export type metricsUidDeleteResponse204 = {
  data: void;
  status: 204;
};

export type metricsUidDeleteResponseComposite = metricsUidDeleteResponse204;

export type metricsUidDeleteResponse = metricsUidDeleteResponseComposite & {
  headers: Headers;
};

export const getMetricsUidDeleteUrl = (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  resourceUid: string,
) => {
  return `https://api.spectrocloud.com/v1/metrics/${resourceKind}/${resourceUid}/values`;
};

export const metricsUidDelete = async (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  resourceUid: string,
  options?: RequestInit,
): Promise<metricsUidDeleteResponse> => {
  return customInstance<metricsUidDeleteResponse>(
    getMetricsUidDeleteUrl(resourceKind, resourceUid),
    {
      ...options,
      method: "DELETE",
    },
  );
};

/**
 * @summary Returns the metrics for a specified resource uid
 */
export type metricsUidListResponse200 = {
  data: MetricTimeSeries;
  status: 200;
};

export type metricsUidListResponseComposite = metricsUidListResponse200;

export type metricsUidListResponse = metricsUidListResponseComposite & {
  headers: Headers;
};

export const getMetricsUidListUrl = (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  resourceUid: string,
  params?: MetricsUidListParams,
) => {
  const normalizedParams = new URLSearchParams();

  Object.entries(params || {}).forEach(([key, value]) => {
    if (value !== undefined) {
      normalizedParams.append(key, value === null ? "null" : value.toString());
    }
  });

  const stringifiedParams = normalizedParams.toString();

  return stringifiedParams.length > 0
    ? `https://api.spectrocloud.com/v1/metrics/${resourceKind}/${resourceUid}/values?${stringifiedParams}`
    : `https://api.spectrocloud.com/v1/metrics/${resourceKind}/${resourceUid}/values`;
};

export const metricsUidList = async (
  resourceKind: "pod" | "namespace" | "spectrocluster" | "machine" | "project",
  resourceUid: string,
  params?: MetricsUidListParams,
  options?: RequestInit,
): Promise<metricsUidListResponse> => {
  return customInstance<metricsUidListResponse>(
    getMetricsUidListUrl(resourceKind, resourceUid, params),
    {
      ...options,
      method: "GET",
    },
  );
};
